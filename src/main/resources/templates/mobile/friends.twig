{%extends "page"%}
{% block headerTitle %}
{% if tab=='friends' %}
<input type="checkbox" id="headerDropdownToggler"/>
<span class="title withDropdown">
	<label class="dropdown" tabindex="0" for="headerDropdownToggler"><span id="headerTitle">
		{% if section=='recent' %}
		{{ L('new_friends') }}
		{% else %}
		{{ L('friends') }}
		{% endif %}
	</span><span class="icon"></span></label>
	<div class="titleDropdownW">
		<label class="closer" for="headerDropdownToggler"></label>
		<ul class="titleDropdown">
			<li style="--i: 0"><a href="/users/{{ owner.id }}/friends" class="filterItem{{ tab=='friends' and section is empty ? ' selected' : '' }}">{{ L('all_friends') }}</a></li>
			{% if currentUser is not null and currentUser.id==owner.id %}<li style="--i: 1"><a href="/users/{{ owner.id }}/friends?section=recent" class="filterItem{{ tab=='friends' and section=='recent' ? ' selected' : '' }}">{{ L('new_friends') }}</a></li>{% endif %}
		</ul>
	</div>
</span>
{% else %}
{{ parent() }}
{% endif %}
{% endblock %}
{%block content%}
{% include 'friends_tabbar' %}
<div class="singleColumn">
{% block friendsInner %}
{% for friend in items %}
<table width="100%" class="friendsRow noBorderSpacing" id="frow{{friend.id}}">
	<tr valign="top">
		<td width="50">
			<a href="{{friend.profileURL}}"{{ profileRel(friend) }}>{{friend | pictureForAvatar('a')}}</a>
		</td>
		<td class="info"{% if cursomActions is empty %} valign="middle"{% endif %}>
			<b><a href="{{friend.profileURL}}"{{ profileRel(friend) }}>{{ friend | name }}</a></b>
			{% if customActions is not empty %}
			<div id="frowActions{{ friend.id }}">
				<ul class="actionList">
					{% for action in customActions %}
					<li><a href="{{ action.href }}{{ friend.id }}"{{ action.ajax ? ' data-ajax' : '' }}>{{ action.title }}</a></li>
					{% endfor %}
				</ul>
			</div>
			{% endif %}
		</td>
	</tr>
</table>
{% else %}
<div class="emptyState">
	{% if tab=='followers' %}
	{{ L('no_followers') }}
	{% elseif tab=='following' %}
	{{ L('no_follows') }}
	{% elseif tab=='online' %}
	{% if currentUser is not null and currentUser.id==owner.id %}
	{{ L('no_friends_online_own') }}
	{% else %}
	{{ L('no_friends_online', {'name': owner.firstAndGender}) }}
	{% endif %}
	{% else %}
	{{ L('no_friends') }}
	{% endif %}
</div>
{% endfor %}
{% endblock %}
{% include "pagination_endless" %}
{% if owner.domain is not empty and tab!='online' and query is empty %}
{% if tab=='friends' %}
{% set realTotal=owner.friendsCount %}
{% set key='remote_friends_incomplete' %}
{% elseif tab=='followers' %}
{% set realTotal=owner.followersCount %}
{% set key='remote_followers_incomplete' %}
{% elseif tab=='following' %}
{% set realTotal=owner.followingCount %}
{% set key='remote_following_incomplete' %}
{% endif %}
{% if totalItems<realTotal %}
<div class="bottomSummaryWrap"><div class="bottomSummary">{{ L(key, {'name': owner.firstAndGender, 'gender': owner.gender, 'server': owner.domain}, {'link': {'href': owner.url, 'target': '_blank', 'rel': 'nofollow'} }) }}</div></div>
{% endif %}
{% endif %}
</div>
{%endblock%}